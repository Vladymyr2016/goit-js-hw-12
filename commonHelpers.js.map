{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nconst formEl = document.querySelector('.feedback-form');\nconst listEl = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btnLoadMore = document.querySelector('.load-more');\nlet serchQuery;\nlet totalResults;\nconst modal = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captions: true,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n});\nlet page = 1;\nlet pageSize;\nasync function fetchImage(q) {\n  const API_KEY = '42040031-47a3b216d4f97a43df3da958a';\n  const params = {\n    key: API_KEY,\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    pageSize: 40,\n  };\n  const BASE_URL = 'https://pixabay.com/api';\n  const url = `${BASE_URL}/`;\n\n  try {\n    const respons = await axios.get(url, { params });\n\n    return respons.data.hits;\n  } catch (error) {\n    throw new Error(response.status);\n  }\n}\n\nformEl.addEventListener('submit', onSubmit);\nbtnLoadMore.addEventListener('click', onLoadMoreClick);\n\nasync function onLoadMoreClick() {\n  page += 1;\n  const arr = await fetchImage(serchQuery);\n  const markup = markUp(arr);\n  listEl.insertAdjacentHTML('beforeend', markup);\n\n  hideLoader();\n  changeBtnStatus();\n}\n\nfunction changeBtnStatus() {\n  const maxPage = Math.ceil(totalResults / pageSize);\n\n  btnLoadMore.disabled = page >= maxPage;\n}\n\nasync function onSubmit(e) {\n  e.preventDefault();\n  loader.classList.remove('is-hidden');\n  listEl.innerHTML = '';\n  page = 1;\n  serchQuery = e.currentTarget.elements.search.value.trim();\n  try {\n    const arr = await fetchImage(serchQuery);\n\n    listEl.innerHTML = markUp(arr);\n    modal.refresh();\n    loader.classList.add('is-hidden');\n  } catch (error) {\n    iziToast.error({\n      position: 'center',\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  }\n}\n\nfunction markUp(arr) {\n  return arr\n    .map(\n      ({ webformatURL, largeImageURL, tags, comments, likes, downloads }) => {\n        return `<li class=\"item\"> \n     <a href='${largeImageURL}'><img class=\"image\" src=\"${webformatURL}\" alt=\"\" /></a>\n     <div class=\"box-text\"> \n     <div>\n     <h2 class=\"main-text\">comments</h2>\n      <p class=\"text\">${comments}</p>\n      </div>\n      <div>\n      <h2 class=\"main-text\">tags</h2>\n      <p class=\"text\">${tags}</p>\n     </div>\n     <div>\n      <h2class=\"main-text\">likes</h2class=>\n      <p class=\"text\">${likes}</p>\n      </div>\n      <div>\n      <h2 class=\"main-text\">downloads</h2>\n      <p class=\"text\">${downloads}</p>\n      </div>\n      </div>\n      </li>`;\n      }\n    )\n    .join('');\n}\n\nfunction showLoader() {\n  btnLoadMore.classList.remove('is-hidden');\n}\nfunction hideLoader() {\n  btnLoadMore.classList.add('is-hidden');\n}\n"],"names":["formEl","listEl","loader","btnLoadMore","serchQuery","totalResults","modal","SimpleLightbox","page","pageSize","fetchImage","q","params","url","axios","onSubmit","onLoadMoreClick","arr","markup","markUp","hideLoader","changeBtnStatus","maxPage","e","iziToast","webformatURL","largeImageURL","tags","comments","likes","downloads"],"mappings":"owBAMA,MAAMA,EAAS,SAAS,cAAc,gBAAgB,EAChDC,EAAS,SAAS,cAAc,UAAU,EAC1CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EACvD,IAAIC,EACAC,EACJ,MAAMC,EAAQ,IAAIC,EAAe,aAAc,CAC7C,aAAc,IACd,SAAU,GACV,aAAc,MACd,gBAAiB,QACnB,CAAC,EACD,IAAIC,EAAO,EACPC,EACJ,eAAeC,EAAWC,EAAG,CAE3B,MAAMC,EAAS,CACb,IAFc,qCAGd,EAAAD,EACA,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMH,EACN,SAAU,EACd,EAEQK,EAAM,2BAEZ,GAAI,CAGF,OAFgB,MAAMC,EAAM,IAAID,EAAK,CAAE,OAAAD,CAAM,CAAE,GAEhC,KAAK,IACrB,MAAC,CACA,MAAM,IAAI,MAAM,SAAS,MAAM,CAChC,CACH,CAEAZ,EAAO,iBAAiB,SAAUe,CAAQ,EAC1CZ,EAAY,iBAAiB,QAASa,CAAe,EAErD,eAAeA,GAAkB,CAC/BR,GAAQ,EACR,MAAMS,EAAM,MAAMP,EAAWN,CAAU,EACjCc,EAASC,EAAOF,CAAG,EACzBhB,EAAO,mBAAmB,YAAaiB,CAAM,EAE7CE,IACAC,GACF,CAEA,SAASA,GAAkB,CACzB,MAAMC,EAAU,KAAK,KAAKjB,EAAeI,CAAQ,EAEjDN,EAAY,SAAWK,GAAQc,CACjC,CAEA,eAAeP,EAASQ,EAAG,CACzBA,EAAE,eAAc,EAChBrB,EAAO,UAAU,OAAO,WAAW,EACnCD,EAAO,UAAY,GACnBO,EAAO,EACPJ,EAAamB,EAAE,cAAc,SAAS,OAAO,MAAM,OACnD,GAAI,CACF,MAAMN,EAAM,MAAMP,EAAWN,CAAU,EAEvCH,EAAO,UAAYkB,EAAOF,CAAG,EAC7BX,EAAM,QAAO,EACbJ,EAAO,UAAU,IAAI,WAAW,CACjC,MAAC,CACAsB,EAAS,MAAM,CACb,SAAU,SACV,MAAO,QACP,QACE,0EACR,CAAK,CACF,CACH,CAEA,SAASL,EAAOF,EAAK,CACnB,OAAOA,EACJ,IACC,CAAC,CAAE,aAAAQ,EAAc,cAAAC,EAAe,KAAAC,EAAM,SAAAC,EAAU,MAAAC,EAAO,UAAAC,KAC9C;AAAA,gBACCJ,8BAA0CD;AAAA;AAAA;AAAA;AAAA,wBAIlCG;AAAA;AAAA;AAAA;AAAA,wBAIAD;AAAA;AAAA;AAAA;AAAA,wBAIAE;AAAA;AAAA;AAAA;AAAA,wBAIAC;AAAA;AAAA;AAAA,YAKnB,EACA,KAAK,EAAE,CACZ,CAKA,SAASV,GAAa,CACpBjB,EAAY,UAAU,IAAI,WAAW,CACvC"}