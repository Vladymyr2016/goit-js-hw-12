{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nconst formEl = document.querySelector('.feedback-form');\nconst listEl = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst modal = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captions: true,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n});\nasync function fetchImage(q) {\n  const API_KEY = '42040031-47a3b216d4f97a43df3da958a';\n  const PARAMS = new URLSearchParams({\n    key: API_KEY,\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n  const BASE_URL = 'https://pixabay.com/api';\n  const url = `${BASE_URL}/?${PARAMS}`;\n\n  try {\n    const respons = await axios.get(url, PARAMS);\n\n    return respons.data.hits;\n  } catch (error) {\n    throw new Error(response.status);\n  }\n}\n\nformEl.addEventListener('submit', onSubmit);\n\nasync function onSubmit(e) {\n  e.preventDefault();\n  loader.classList.remove('is-hidden');\n  listEl.innerHTML = '';\n  const serchQuery = e.currentTarget.elements.search.value.trim();\n  try {\n    const arr = await fetchImage(serchQuery);\n    console.log(arr);\n    // if (arr.length !== 0) {\n    listEl.innerHTML = markUp(arr);\n    modal.refresh();\n    loader.classList.add('is-hidden');\n    // }\n  } catch (error) {\n    iziToast.error({\n      position: 'center',\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  }\n}\n\nfunction markUp(arr) {\n  return arr\n    .map(\n      ({ webformatURL, largeImageURL, tags, comments, likes, downloads }) => {\n        return `<li class=\"item\"> \n     <a href='${largeImageURL}'><img class=\"image\" src=\"${webformatURL}\" alt=\"\" /></a>\n     <div class=\"box-text\"> \n     <div>\n     <h2 class=\"main-text\">comments</h2>\n      <p class=\"text\">${comments}</p>\n      </div>\n      <div>\n      <h2 class=\"main-text\">tags</h2>\n      <p class=\"text\">${tags}</p>\n     </div>\n     <div>\n      <h2class=\"main-text\">likes</h2class=>\n      <p class=\"text\">${likes}</p>\n      </div>\n      <div>\n      <h2 class=\"main-text\">downloads</h2>\n      <p class=\"text\">${downloads}</p>\n      </div>\n      </div>\n      </li>`;\n      }\n    )\n    .join('');\n}\n"],"names":["formEl","listEl","loader","modal","SimpleLightbox","fetchImage","q","API_KEY","PARAMS","url","axios","onSubmit","e","serchQuery","arr","markUp","iziToast","webformatURL","largeImageURL","tags","comments","likes","downloads"],"mappings":"owBAMA,MAAMA,EAAS,SAAS,cAAc,gBAAgB,EAChDC,EAAS,SAAS,cAAc,UAAU,EAC1CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAQ,IAAIC,EAAe,aAAc,CAC7C,aAAc,IACd,SAAU,GACV,aAAc,MACd,gBAAiB,QACnB,CAAC,EACD,eAAeC,EAAWC,EAAG,CAC3B,MAAMC,EAAU,qCACVC,EAAS,IAAI,gBAAgB,CACjC,IAAKD,EACL,EAAAD,EACA,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAEKG,EAAM,4BAAgBD,IAE5B,GAAI,CAGF,OAFgB,MAAME,EAAM,IAAID,EAAKD,CAAM,GAE5B,KAAK,IACrB,MAAC,CACA,MAAM,IAAI,MAAM,SAAS,MAAM,CAChC,CACH,CAEAR,EAAO,iBAAiB,SAAUW,CAAQ,EAE1C,eAAeA,EAASC,EAAG,CACzBA,EAAE,eAAc,EAChBV,EAAO,UAAU,OAAO,WAAW,EACnCD,EAAO,UAAY,GACnB,MAAMY,EAAaD,EAAE,cAAc,SAAS,OAAO,MAAM,OACzD,GAAI,CACF,MAAME,EAAM,MAAMT,EAAWQ,CAAU,EACvC,QAAQ,IAAIC,CAAG,EAEfb,EAAO,UAAYc,EAAOD,CAAG,EAC7BX,EAAM,QAAO,EACbD,EAAO,UAAU,IAAI,WAAW,CAEjC,MAAC,CACAc,EAAS,MAAM,CACb,SAAU,SACV,MAAO,QACP,QACE,0EACR,CAAK,CACF,CACH,CAEA,SAASD,EAAOD,EAAK,CACnB,OAAOA,EACJ,IACC,CAAC,CAAE,aAAAG,EAAc,cAAAC,EAAe,KAAAC,EAAM,SAAAC,EAAU,MAAAC,EAAO,UAAAC,KAC9C;AAAA,gBACCJ,8BAA0CD;AAAA;AAAA;AAAA;AAAA,wBAIlCG;AAAA;AAAA;AAAA;AAAA,wBAIAD;AAAA;AAAA;AAAA;AAAA,wBAIAE;AAAA;AAAA;AAAA;AAAA,wBAIAC;AAAA;AAAA;AAAA,YAKnB,EACA,KAAK,EAAE,CACZ"}